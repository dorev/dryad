#include "measure.h"
#include "dryadutils.h"

namespace dryad
{

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void voice_t::add_note(note_t note)
{
    _notes.push_back(note);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void voice_t::add_note(int offset, int duration)
{
    _notes.emplace_back(offset, duration);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

int voice_t::get_total_duration()
{
    int result = std::reduce(
        _notes.begin(), _notes.end(), 0,
        [](int acc, const note_t& note)
        {
            return acc + note.get_duration();
        });

    return result;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}